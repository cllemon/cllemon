---
date: 2019-12-07
position: æ­å·
type: posts

title: Git ä½¿ç”¨
desc: Git å¸¸ç”¨å·¥ä½œæµã€å‘½ä»¤é›†é”¦ã€ä¸€äº›è‡ªå®šé…ç½®
---

## åˆ†åŒºä¿¡æ¯

```sh
  ï¼ˆ å†™ä»£ç  ï¼‰           ï¼ˆ æ–‡ä»¶æ±  ï¼‰        ï¼ˆ git log æŸ¥çœ‹ ï¼‰    ï¼ˆ github ç­‰å¹³å° ï¼‰
Working Directory        Stage             Commit History          Remote
    å·¥ä½œåŒº   ==========>  æš‚å­˜åŒº   ==========>   ç‰ˆæœ¬åº“   ==========> è¿œç¨‹ä»“åº“

            git add              git commit             git push
```

## å·¥ä½œæµ

### å•äººå¼€å‘

```sh
# åˆå§‹åŒ–
$ git init                                       # åˆå§‹åŒ–
$ git remote add origin git@xxx.com:xxx/xxx.git  # å…³è”è¿œç¨‹ä»“åº“
$ git push --set-upstream origin master          # ä¸è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿æ¥

# å¼€å‘
$ git pull                   # å¼€å‘å‰æ‹‰å–è¿œç¨‹ä»£ç 
$ git add .                  # æ·»åŠ æ‰€æœ‰ä¿®æ”¹è‡³æš‚å­˜åŒº
$ git status                 # æŸ¥çœ‹ä¿®æ”¹æƒ…å†µ
$ git reset HEAD -- xxx.md   # å°† xxx.md ç§»é™¤æš‚å­˜åŒº
$ git commit -m 'xxx'        # æäº¤ä¿®æ”¹çš„ä»£ç 
$ git log --graph            # æŸ¥çœ‹æäº¤æ—¥å¿—
$ git push                   # æ¨é€ä»£ç åˆ°è¿œç¨‹ä»“åº“
```

### å¤šäººååŒå¼€å‘

```sh
# å‡†å¤‡åŠŸèƒ½åˆ†æ”¯
$ git checkout master # åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ï¼ˆæœ¬åœ°å·² clone ä»“åº“ï¼‰
$ git pull # æ‹‰å–è¿œç¨‹ä¿æŒæœ€æ–°
$ git checkout -b feature/xxx # åˆ‡å‡ºåŠŸèƒ½åˆ†æ”¯
$ git push --set-upstream origin feature/xxx # ä¸è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿æ¥

# å¼€å‘
## ç¬¬ä¸€å¤©
$ git commit -m 'feat: part A'
$ git commit -m 'feat: part B'

## ç¬¬äºŒå¤©
### ä¿è¯æœ¬åœ°æœ€æ–°
$ git checkout master
$ git pull
$ git checkout feature/xxx
$ git rebase master # è‹¥å­˜åœ¨å†²çªæŒ‰å®é™…æƒ…å†µè§£å†³ ã€â‘ ã€‘
$ git push -f

### ç»§ç»­å¼€å‘
$ git commit -m 'feat: part C'
$ git commit -m 'feat: Done!'
$ git push

## å¼€å‘å®Œæˆï¼Œåœ¨ä»£ç æ‰˜ç®¡å¹³å°æäº¤ PR/MR
```

```sh
â‘ 
              A --- B feature/xxx
             /
o --- o --- o --- o --- o --- o master       ğŸ‘‡
                       /
          feature/other
                                A --- B feature/xxx
                               /
o --- o --- o --- o --- o --- o master
                       /
          feature/other
```

## å¸¸ç”¨å‘½ä»¤ï¼ˆé€ŸæŸ¥ï¼‰

### Branch

```sh
git branch -a # æŸ¥çœ‹æœ¬åœ°å’Œè¿œç¨‹çš„åˆ†æ”¯
git checkout -b dev # åˆ›å»ºæœ¬åœ°åˆ†æ”¯
git push --set-upstream origin dev # å°†æœ¬åœ°åˆ†æ”¯åŒæ­¥åˆ°è¿œç¨‹
git checkout main # åˆ‡æ¢åˆ†æ”¯
git branch -d/-D dev # åˆ é™¤æœ¬åœ°åˆ†æ”¯
git push origin -d dev # åˆ é™¤è¿œç¨‹åˆ†æ”¯
```

### Tag

```sh
git tag # æŸ¥çœ‹ tag
git tag v1.0.0 -m "release: v1.0.0" # åˆ›å»º tag
git push origin v1.0.0 # æ¨é€ tag è‡³è¿œç¨‹
git tag -d v1.0.0 # åˆ é™¤ tagï¼ˆæœ¬åœ°ï¼‰
git push origin :refs/tags/v1.0.0 # åˆ é™¤ tagï¼ˆè¿œç¨‹ï¼‰
```

## è‡ªå®šä¹‰é…ç½®ï¼ˆ.gitconfigï¼‰

**åˆ›å»ºå…¨å±€é…ç½®**

```sh
$ vi ~/.gitconfig
```

**ç®€åŒ–å‘½ä»¤å­—ç¬¦ï¼ŒåŠ å¿«è¾“å…¥ï¼ˆä¾›å‚è€ƒï¼‰**

```sh
[alias]
  a = add .
  br = branch
  s = status
  l = log --oneline --all --graph
  ct = commit -m
  ck = checkout
  c  = clone
```

**å½“ä½ éœ€è¦æ ¹æ®å·¥ä½œåŒºï¼Œåº”ç”¨ä¸åŒé…ç½®ï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š**

```sh
[includeIf "gitdir:~/workspace/A/"]
  path = ~/.gitconfig-A

[includeIf "gitdir:~/Workspace/B/"]
  path = ~/.gitconfig-B
```

`~/.gitconfig-A`

```sh
[user]
	name = A
	email = A@gmail.com
```

`~/.gitconfig-B`

```sh
[user]
	name = B
	email = B@gmail.com
```
